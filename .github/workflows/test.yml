# Use a matrix strategy to test across different Python versions and OSes
strategy:
  matrix:
    os: [ubuntu-latest, macos-latest]
    python-version: ['3.9', '3.10', '3.11', '3.12']

# 3. Specify the environment (runner)
runs-on: ${{ matrix.os }}

# 4. Define the steps
steps:
  - name: Checkout Repository
    # Action to clone your repository code onto the runner
    uses: actions/checkout@v4

  - name: Set up Python ${{ matrix.python-version }}
    # Action to set up the specific Python version
    uses: actions/setup-python@v5
    with:
      python-version: ${{ matrix.python-version }}
      cache: 'pip' # Cache dependencies for faster runs

  - name: Install dependencies and package
    # Install pytest and the package itself (in editable mode for development/testing)
    run: |
      python -m pip install --upgrade pip
      pip install pytest
      # Install your package and any required dependencies
      pip install -e .

  - name: Run Pytest in tests/ directory
    # Executes pytest, specifically targeting the 'tests/' directory
    # -v provides verbose output, --color=yes makes output easier to read
    run: pytest tests/ -v --color=yes